(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{1167:function(e,t,n){"use strict";n.r(t);var header=n(298),o=n(314),r=[function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("ul",{staticClass:"page-decore"},[o("li",{staticClass:"top"},[o("img",{staticClass:"img-fluid inner2",attrs:{src:n(284),alt:"footer-back-img"}})]),e._v(" "),o("li",{staticClass:"bottom"},[o("img",{staticClass:"img-fluid inner2",attrs:{src:n(284),alt:"footer-back-img"}})])])}],c=n(21),d=n(10),l=(n(208),n(52),n(633),n(50),n(28),n(14),n(66),n(147)),m=n.n(l),f=n(634),v=n(990),h=n(747),w=["ache","cough","head","snot"];m.a.defaults.headers.post["Content-Type"]="application/json";var _="https://i6e206.p.ssafy.io",y="Z5YF9UcUB9",S={name:"App",components:{UserVideo:v.a},data:function(){return{OV:void 0,session:void 0,mainStreamManager:void 0,publisher:void 0,subscribers:[],mySessionId:"SessionA",myUserName:"Participant"+Math.floor(100*Math.random()),state:{model:null,preview:"",predictions:[]}}},mounted:function(){return Object(d.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},methods:{cropToCanvas:function(image,canvas,e){e.clearRect(0,0,e.canvas.width,e.canvas.height),e.fillStyle="#000000",e.fillRect(0,0,canvas.width,canvas.height),e.drawImage(image,0,0,640,640)},joinSession:function(){var e=this;this.OV=new f.OpenVidu,this.session=this.OV.initSession(),this.session.on("streamCreated",(function(t){var n=t.stream,o=e.session.subscribe(n);e.subscribers.push(o)})),this.session.on("streamDestroyed",(function(t){var n=t.stream,o=e.subscribers.indexOf(n.streamManager,0);o>=0&&e.subscribers.splice(o,1)})),this.session.on("exception",(function(e){var t=e.exception;console.warn(t)}));var t=this;this.getToken(this.mySessionId).then((function(n){e.session.connect(n,{clientData:e.myUserName}).then((function(){navigator.mediaDevices.getUserMedia({audio:!0,video:{width:640,height:640}}).then((function(e){var n=e.getVideoTracks()[0],video=document.createElement("video");video.srcObject=new MediaStream([n]);var canvas=document.getElementById("canvas");canvas.width=640,canvas.height=640;var o=canvas.getContext("2d");video.onloadedmetadata=function(e){video.addEventListener("play",(function(){!function e(){if(!video.paused&&!video.ended){t.cropToCanvas(video,canvas,o),h.c().startScope();var input=h.f((function(){return h.d.resizeBilinear(h.a.fromPixels(video),[640,640]).div(255).expandDims(0)}));t.state.model.executeAsync(input).then((function(e){var t="16px sans-serif";o.font=t,o.textBaseline="top";var i,n=Object(c.a)(e,4),r=n[0],d=n[1],l=n[2],m=n[3],f=r.dataSync(),v=d.dataSync(),_=l.dataSync(),y=m.dataSync()[0];for(h.b(e),i=0;i<y;++i){var S=f.slice(4*i,4*(i+1)),C=Object(c.a)(S,4),x=C[0],O=C[1],k=C[2],T=C[3];x*=canvas.width,k*=canvas.width,O*=canvas.height;var j=k-x,E=(T*=canvas.height)-O,I=w[_[i]],N=v[i].toFixed(2);o.strokeStyle="#00FFFF",o.lineWidth=4,o.strokeRect(x,O,j,E),o.fillStyle="#00FFFF";var P=o.measureText(I+":"+N).width,V=parseInt(t,10);o.fillRect(x,O,P+4,V+4)}for(i=0;i<y;++i){var F=f.slice(4*i,4*(i+1)),M=Object(c.a)(F,3),U=M[0],A=M[1];U*=canvas.width,A*=canvas.height;var R=w[_[i]],$=v[i].toFixed(2);o.fillStyle="#000000",o.fillText(R+":"+$,U,A)}})),o.drawImage(video,0,0,640,640),setTimeout(e,1e3/30),h.c().endScope()}}()})),video.msHorizontalMirror=!1,video.play();var n=canvas.captureStream(30).getVideoTracks()[0];canvas.addEventListener("webglcontextlost",(function(e){console.log("tttttttttttttttttttttttttttttttttttttttttttttttt")}),!1);var r=t.OV.initPublisher(void 0,{audioSource:!1,videoSource:n});t.publisher=r,t.session.publish(t.publisher)}})).catch((function(e){console.log(e.name+": "+e.message)}))})).catch((function(e){console.log("There was an error connecting to the session:",e.code,e.message)}))})),window.addEventListener("beforeunload",this.leaveSession)},leaveSession:function(){this.session&&this.session.disconnect(),this.session=void 0,this.mainStreamManager=void 0,this.publisher=void 0,this.subscribers=[],this.OV=void 0,window.removeEventListener("beforeunload",this.leaveSession)},updateMainVideoStreamManager:function(e){this.mainStreamManager!==e&&(this.mainStreamManager=e)},getToken:function(e){var t=this;return this.createSession(e).then((function(e){return t.createToken(e)}))},createSession:function(e){return new Promise((function(t,n){m.a.post("".concat(_,"/openvidu/api/sessions"),JSON.stringify({customSessionId:e}),{auth:{username:"OPENVIDUAPP",password:y}}).then((function(e){return e.data})).then((function(data){return t(data.id)})).catch((function(o){409===o.response.status?t(e):(console.warn("No connection to OpenVidu Server. This may be a certificate error at ".concat(_)),window.confirm("No connection to OpenVidu Server. This may be a certificate error at ".concat(_,'\n\nClick OK to navigate and accept it. If no certificate warning is shown, then check that your OpenVidu Server is up and running at "').concat(_,'"'))&&location.assign("".concat(_,"/accept-certificate")),n(o.response))}))}))},createToken:function(e){return new Promise((function(t,n){m.a.post("".concat(_,"/openvidu/api/sessions/").concat(e,"/connection"),{},{auth:{username:"OPENVIDUAPP",password:y}}).then((function(e){return e.data})).then((function(data){return t(data.token)})).catch((function(e){return n(e.response)}))}))},process:function(){var e=this;return Object(d.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return"https://ssafy6webmodel.s3.ap-northeast-2.amazonaws.com/web_model/model.json",t.next=3,h.e("https://ssafy6webmodel.s3.ap-northeast-2.amazonaws.com/web_model/model.json").then((function(t){e.state.model=t})).finally((function(){alert("model downloaded"),e.joinSession()}));case 3:case"end":return t.stop()}}),t)})))()}}},C=n(46),x={name:"about-page",components:{Camera:Object(C.a)(S,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container",attrs:{id:"main-container"}},[e.session?e._e():n("div",{attrs:{id:"join"}},[e._m(0),e._v(" "),n("div",{staticClass:"jumbotron vertical-center",attrs:{id:"join-dialog"}},[n("h1",[e._v("Join a video session")]),e._v(" "),n("div",{staticClass:"form-group"},[n("p",[n("label",[e._v("Participant")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.myUserName,expression:"myUserName"}],staticClass:"form-control",attrs:{type:"text",required:""},domProps:{value:e.myUserName},on:{input:function(t){t.target.composing||(e.myUserName=t.target.value)}}})]),e._v(" "),n("p",[n("label",[e._v("Session")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.mySessionId,expression:"mySessionId"}],staticClass:"form-control",attrs:{type:"text",required:""},domProps:{value:e.mySessionId},on:{input:function(t){t.target.composing||(e.mySessionId=t.target.value)}}})]),e._v(" "),n("p",{staticClass:"text-center"},[n("button",{staticClass:"btn btn-lg btn-success",on:{click:function(t){return e.joinSession()}}},[e._v("\n            Join!\n          ")]),e._v(" "),n("button",{staticClass:"btn btn-lg btn-success",on:{click:function(t){return e.process()}}},[e._v("\n            model download and join!\n          ")])])])])]),e._v(" "),e.session?n("div",{attrs:{id:"session"}},[n("div",{attrs:{id:"session-header"}},[n("h1",{attrs:{id:"session-title"}},[e._v(e._s(e.mySessionId))]),e._v(" "),n("input",{staticClass:"btn btn-large btn-danger",attrs:{type:"button",id:"buttonLeaveSession",value:"Leave session"},on:{click:e.leaveSession}})]),e._v(" "),n("div",{staticClass:"col-md-6",attrs:{id:"video-container"}},e._l(e.subscribers,(function(sub){return n("user-video",{key:sub.stream.connection.connectionId,attrs:{"stream-manager":sub},nativeOn:{click:function(t){return e.updateMainVideoStreamManager(sub)}}})})),1),e._v(" "),e._m(1)]):e._e()])}),[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"img-div"}},[t("img",{attrs:{src:"resources/images/openvidu_grey_bg_transp_cropped.png"}})])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("canvas",{attrs:{id:"canvas"}})])}],!1,null,null,null).exports}},O=Object(C.a)(x,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("section",{staticClass:"about-page section-py-space"},[o("div",{staticClass:"custom-container"},[o("div",{staticClass:"row"},[o("div",{staticClass:"col-sm-8 offset-sm-2 text-center"},[o("Camera"),e._v(" "),o("img",{staticClass:"img-fluid w-100 pb-4",attrs:{src:n(367),alt:"about"}}),e._v(" "),e._m(0)],1)])])])}),[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"row"},[n("div",{staticClass:"col-md-10 offset-md-1"},[n("p",[e._v("\n              On the other hand, we denounce with righteous indignation and\n              dislike men who are so beguiled and demoralized by the charms of\n              pleasure of the moment, so blinded by desire, that they cannot\n              foresee the pain and trouble that are bound to ensue; and equal\n              blame belongs to those who fail in their duty through weakness\n              of will, which is the same as saying through shrinking from toil\n              and pain. These cases are perfectly simple and easy to\n              distinguish.\n            ")])])])}],!1,null,null,null).exports,k=n(669),T=n(670),j=n(991),E={components:{AboutPage:O,Testimonial:k.a,SecureApp:T.a,Counter:j.a}},I=Object(C.a)(E,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e._m(0),e._v(" "),n("AboutPage"),e._v(" "),n("section",{staticClass:"section-py-space"},[n("Testimonial")],1),e._v(" "),n("SecureApp"),e._v(" "),n("Counter")],1)}),r,!1,null,null,null).exports,footer=n(303),N=n(301),P={components:{Header:header.a,Breadcrumbs:o.a,About:I,Footer:footer.a,TapTop:N.a}},V=Object(C.a)(P,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"inner-page"},[n("Header")],1),e._v(" "),n("div",[n("About")],1),e._v(" "),n("Footer"),e._v(" "),n("TapTop")],1)}),[],!1,null,null,null);t.default=V.exports},291:function(e,t){e.exports=function(){throw new Error("define cannot be used indirect")}},316:function(e,t){(function(t){e.exports=t}).call(this,{})},633:function(e,t,n){"use strict";var o=n(6),r=n(1),c=n(3),d=n(53),l=n(672),m=n(211),f=n(4),v=r.RangeError,h=r.String,w=Math.floor,_=c(m),y=c("".slice),S=c(1..toFixed),C=function(e,t,n){return 0===t?n:t%2==1?C(e,t-1,n*e):C(e*e,t/2,n)},x=function(data,e,t){for(var n=-1,o=t;++n<6;)o+=e*data[n],data[n]=o%1e7,o=w(o/1e7)},O=function(data,e){for(var t=6,n=0;--t>=0;)n+=data[t],data[t]=w(n/e),n=n%e*1e7},k=function(data){for(var e=6,s="";--e>=0;)if(""!==s||0===e||0!==data[e]){var t=h(data[e]);s=""===s?t:s+_("0",7-t.length)+t}return s};o({target:"Number",proto:!0,forced:f((function(){return"0.000"!==S(8e-5,3)||"1"!==S(.9,0)||"1.25"!==S(1.255,2)||"1000000000000000128"!==S(0xde0b6b3a7640080,0)}))||!f((function(){S({})}))},{toFixed:function(e){var t,n,o,r,c=l(this),m=d(e),data=[0,0,0,0,0,0],f="",w="0";if(m<0||m>20)throw v("Incorrect fraction digits");if(c!=c)return"NaN";if(c<=-1e21||c>=1e21)return h(c);if(c<0&&(f="-",c=-c),c>1e-21)if(n=(t=function(e){for(var t=0,n=e;n>=4096;)t+=12,n/=4096;for(;n>=2;)t+=1,n/=2;return t}(c*C(2,69,1))-69)<0?c*C(2,-t,1):c/C(2,t,1),n*=4503599627370496,(t=52-t)>0){for(x(data,0,n),o=m;o>=7;)x(data,1e7,0),o-=7;for(x(data,C(10,o,1),0),o=t-1;o>=23;)O(data,1<<23),o-=23;O(data,1<<o),x(data,1,1),O(data,2),w=k(data)}else x(data,0,n),x(data,1<<-t,0),w=k(data)+_("0",m);return w=m>0?f+((r=w.length)<=m?"0."+_("0",m-r)+w:y(w,0,r-m)+"."+y(w,r-m)):f+w}})},672:function(e,t,n){var o=n(3);e.exports=o(1..valueOf)},687:function(e,t){},688:function(e,t){},699:function(e,t){},730:function(e,t){},732:function(e,t){},733:function(e,t){},734:function(e,t){},735:function(e,t){}}]);